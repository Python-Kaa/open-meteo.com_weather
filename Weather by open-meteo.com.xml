<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>6.4</version>
    <template_groups>
        <template_group>
            <uuid>7df96b18c230490a9a0a9e2307226338</uuid>
            <name>Templates</name>
        </template_group>
    </template_groups>
    <templates>
        <template>
            <uuid>bd5c020b77ed47898e1e4c62243ca246</uuid>
            <template>Weather by open-meteo.com</template>
            <name>Weather by open-meteo.com</name>
            <description>https://open-meteo.com/en/docs#current=temperature_2m,relative_humidity_2m,precipitation,rain,showers,snowfall,weather_code,cloud_cover,pressure_msl,wind_speed_10m,wind_direction_10m,wind_gusts_10m&amp;hourly=&amp;daily=weather_code,temperature_2m_max,temperature_2m_min,sunrise,sunset,daylight_duration,precipitation_sum,rain_sum,showers_sum,snowfall_sum,precipitation_hours,precipitation_probability_max,wind_speed_10m_max,wind_gusts_10m_max,wind_direction_10m_dominant&amp;wind_speed_unit=ms&amp;timeformat=unixtime&amp;timezone=Europe%2FMoscow&amp;forecast_days=3</description>
            <groups>
                <group>
                    <name>Templates</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>7cd9666e705a43dea4af85fe1563e65c</uuid>
                    <name>Get-Weather</name>
                    <type>HTTP_AGENT</type>
                    <key>openmeteo[weather.get]</key>
                    <delay>15m</delay>
                    <value_type>CHAR</value_type>
                    <trends>0</trends>
                    <url>https://api.open-meteo.com/v1/forecast</url>
                    <query_fields>
                        <query_field>
                            <name>latitude</name>
                            <value>{$LATITUDE}</value>
                        </query_field>
                        <query_field>
                            <name>longitude</name>
                            <value>{$LONGITUDE}</value>
                        </query_field>
                        <query_field>
                            <name>current</name>
                            <value>temperature_2m,relative_humidity_2m,precipitation,rain,showers,snowfall,weather_code,cloud_cover,pressure_msl,wind_speed_10m,wind_direction_10m,wind_gusts_10m</value>
                        </query_field>
                        <query_field>
                            <name>daily</name>
                            <value>weather_code,temperature_2m_max,temperature_2m_min,sunrise,sunset,daylight_duration,precipitation_sum,rain_sum,showers_sum,snowfall_sum,precipitation_hours,precipitation_probability_max,wind_speed_10m_max,wind_gusts_10m_max,wind_direction_10m_dominant</value>
                        </query_field>
                        <query_field>
                            <name>wind_speed_unit</name>
                            <value>ms</value>
                        </query_field>
                        <query_field>
                            <name>timeformat</name>
                            <value>unixtime</value>
                        </query_field>
                        <query_field>
                            <name>timezone</name>
                            <value>{$TIMEZONE}</value>
                        </query_field>
                        <query_field>
                            <name>forecast_days</name>
                            <value>{$FORECAST_DAYS}</value>
                        </query_field>
                    </query_fields>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Weather</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>0119ed0e2dee43788db4e49c86e5623e</uuid>
                    <name>Сейчас - Облачность</name>
                    <type>DEPENDENT</type>
                    <key>openmeteo[weather.now.cloud]</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.current.cloud_cover</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>openmeteo[weather.get]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Weather</value>
                        </tag>
                        <tag>
                            <tag>DateTime</tag>
                            <value>Сейчас</value>
                        </tag>
                        <tag>
                            <tag>Weather Block</tag>
                            <value>General</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>014fb7806227420491b3de826d8cac87</uuid>
                    <name>Сейчас - Погода</name>
                    <type>DEPENDENT</type>
                    <key>openmeteo[weather.now.code]</key>
                    <delay>0</delay>
                    <valuemap>
                        <name>Weather Code</name>
                    </valuemap>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.current.weather_code</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>openmeteo[weather.get]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Weather</value>
                        </tag>
                        <tag>
                            <tag>DateTime</tag>
                            <value>Сейчас</value>
                        </tag>
                        <tag>
                            <tag>Weather Block</tag>
                            <value>General</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>f3f130c780da4d05ad446b931983222f</uuid>
                    <name>Сейчас - Влажность</name>
                    <type>DEPENDENT</type>
                    <key>openmeteo[weather.now.humidity]</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.current.relative_humidity_2m</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>openmeteo[weather.get]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Weather</value>
                        </tag>
                        <tag>
                            <tag>DateTime</tag>
                            <value>Сейчас</value>
                        </tag>
                        <tag>
                            <tag>Weather Block</tag>
                            <value>General</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>3382d47fdb794d34a29fc97eb8a6355a</uuid>
                    <name>Сейчас - Осадки (дождь)</name>
                    <type>DEPENDENT</type>
                    <key>openmeteo[weather.now.precipitation.rain]</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>!мм</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.current.rain</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>openmeteo[weather.get]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Weather</value>
                        </tag>
                        <tag>
                            <tag>DateTime</tag>
                            <value>Сейчас</value>
                        </tag>
                        <tag>
                            <tag>Weather Block</tag>
                            <value>Осадки</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>d254a03d0b81495384113139fe5f7c0f</uuid>
                    <name>Сейчас - Осадки (ливень)</name>
                    <type>DEPENDENT</type>
                    <key>openmeteo[weather.now.precipitation.showers]</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>!мм</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.current.showers</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>openmeteo[weather.get]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Weather</value>
                        </tag>
                        <tag>
                            <tag>DateTime</tag>
                            <value>Сейчас</value>
                        </tag>
                        <tag>
                            <tag>Weather Block</tag>
                            <value>Осадки</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>b5da6f7bd8764e0c814bc06833f22c1a</uuid>
                    <name>Сейчас - Осадки (снег)</name>
                    <type>DEPENDENT</type>
                    <key>openmeteo[weather.now.precipitation.snowfall]</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>!см</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.current.snowfall</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>openmeteo[weather.get]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Weather</value>
                        </tag>
                        <tag>
                            <tag>DateTime</tag>
                            <value>Сейчас</value>
                        </tag>
                        <tag>
                            <tag>Weather Block</tag>
                            <value>Осадки</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>8643e01beb5e4ac69f9626829dc8917e</uuid>
                    <name>Сейчас - Осадки</name>
                    <type>DEPENDENT</type>
                    <key>openmeteo[weather.now.precipitation.sum]</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>!мм</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.current.precipitation</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>openmeteo[weather.get]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Weather</value>
                        </tag>
                        <tag>
                            <tag>DateTime</tag>
                            <value>Сейчас</value>
                        </tag>
                        <tag>
                            <tag>Weather Block</tag>
                            <value>Осадки</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>05bf6848bfb64a76b42d73812a577252</uuid>
                    <name>Сейчас - Давление</name>
                    <type>DEPENDENT</type>
                    <key>openmeteo[weather.now.pressure.msl]</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>!мм рт ст</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.current.pressure_msl</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>MULTIPLIER</type>
                            <parameters>
                                <parameter>0.75006375541921</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>openmeteo[weather.get]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Weather</value>
                        </tag>
                        <tag>
                            <tag>DateTime</tag>
                            <value>Сейчас</value>
                        </tag>
                        <tag>
                            <tag>Weather Block</tag>
                            <value>General</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>cdff1fe3cd704b6c892f2888c17bccae</uuid>
                    <name>Сейчас - Температура</name>
                    <type>DEPENDENT</type>
                    <key>openmeteo[weather.now.temperature]</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>°C</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.current.temperature_2m</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>openmeteo[weather.get]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Weather</value>
                        </tag>
                        <tag>
                            <tag>DateTime</tag>
                            <value>Сейчас</value>
                        </tag>
                        <tag>
                            <tag>Weather Block</tag>
                            <value>Температура</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>e1da23757bb2423bbd26031d5ab8bffc</uuid>
                    <name>Сейчас - Ветер (азимут)</name>
                    <type>DEPENDENT</type>
                    <key>openmeteo[weather.now.wind.azimuth]</key>
                    <delay>0</delay>
                    <units>°</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.current.wind_direction_10m</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>openmeteo[weather.get]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Weather</value>
                        </tag>
                        <tag>
                            <tag>DateTime</tag>
                            <value>Сейчас</value>
                        </tag>
                        <tag>
                            <tag>Weather Block</tag>
                            <value>Ветер</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>4722ad868831457cb162c1fec3a428d7</uuid>
                    <name>Сейчас - Ветер (направление)</name>
                    <type>CALCULATED</type>
                    <key>openmeteo[weather.now.wind.direction.arrow]</key>
                    <delay>15m</delay>
                    <params>floor((last(//openmeteo[weather.now.wind.azimuth])/45))</params>
                    <valuemap>
                        <name>Направления ветра (стрелочки)</name>
                    </valuemap>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Weather</value>
                        </tag>
                        <tag>
                            <tag>DateTime</tag>
                            <value>Сейчас</value>
                        </tag>
                        <tag>
                            <tag>Weather Block</tag>
                            <value>Ветер</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>723583b08115493eb463aeb19de70996</uuid>
                    <name>Сейчас - Ветер (направление)</name>
                    <type>CALCULATED</type>
                    <key>openmeteo[weather.now.wind.direction.direction]</key>
                    <delay>15m</delay>
                    <status>DISABLED</status>
                    <params>floor((last(//openmeteo[weather.now.wind.azimuth])/22.5))</params>
                    <valuemap>
                        <name>Направления ветра</name>
                    </valuemap>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Weather</value>
                        </tag>
                        <tag>
                            <tag>DateTime</tag>
                            <value>Сейчас</value>
                        </tag>
                        <tag>
                            <tag>Weather Block</tag>
                            <value>Ветер</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>9374a8374a16433cacdaa67ef2082d8a</uuid>
                    <name>Сейчас - Ветер (порывы)</name>
                    <type>DEPENDENT</type>
                    <key>openmeteo[weather.now.wind.gusts]</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>!м/с</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.current.wind_gusts_10m</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>openmeteo[weather.get]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Weather</value>
                        </tag>
                        <tag>
                            <tag>DateTime</tag>
                            <value>Сейчас</value>
                        </tag>
                        <tag>
                            <tag>Weather Block</tag>
                            <value>Ветер</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>872982789acf45f0bf42ad9e424c7c05</uuid>
                    <name>Сейчас - Ветер (скорость)</name>
                    <type>DEPENDENT</type>
                    <key>openmeteo[weather.now.wind.speed]</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>!м/с</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.current.wind_speed_10m</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>openmeteo[weather.get]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Weather</value>
                        </tag>
                        <tag>
                            <tag>DateTime</tag>
                            <value>Сейчас</value>
                        </tag>
                        <tag>
                            <tag>Weather Block</tag>
                            <value>Ветер</value>
                        </tag>
                    </tags>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <uuid>422c8c156863438ba0a44100a6ce655a</uuid>
                    <name>Daily Weather Discovery</name>
                    <type>DEPENDENT</type>
                    <key>openmeteo[weather.discover]</key>
                    <delay>0</delay>
                    <lifetime>0s</lifetime>
                    <item_prototypes>
                        <item_prototype>
                            <uuid>9264114e3a124f53b5f69eedcb7288be</uuid>
                            <name>+{#DATETIME} дн - Погода</name>
                            <type>DEPENDENT</type>
                            <key>openmeteo[weather.today+{#DATETIME}.code]</key>
                            <delay>0</delay>
                            <valuemap>
                                <name>Weather Code</name>
                            </valuemap>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.daily.weather_code[{#DATETIME}]</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>openmeteo[weather.get]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Weather</value>
                                </tag>
                                <tag>
                                    <tag>DateTime</tag>
                                    <value>+{#DATETIME} дн</value>
                                </tag>
                                <tag>
                                    <tag>Weather Block</tag>
                                    <value>General</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>da616efcd5414b8eae205cc086467ea6</uuid>
                            <name>+{#DATETIME} дн - Погода на дату</name>
                            <type>DEPENDENT</type>
                            <key>openmeteo[weather.today+{#DATETIME}.date]</key>
                            <delay>0</delay>
                            <units>unixtime</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.daily.time[{#DATETIME}]</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>openmeteo[weather.get]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Weather</value>
                                </tag>
                                <tag>
                                    <tag>DateTime</tag>
                                    <value>+{#DATETIME} дн</value>
                                </tag>
                                <tag>
                                    <tag>Weather Block</tag>
                                    <value>General</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>c8c695cbd2534337be13b73a5720ce72</uuid>
                            <name>+{#DATETIME} дн - Продолжительность дня</name>
                            <type>DEPENDENT</type>
                            <key>openmeteo[weather.today+{#DATETIME}.duration]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>s</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.daily.daylight_duration[{#DATETIME}]</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>openmeteo[weather.get]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Weather</value>
                                </tag>
                                <tag>
                                    <tag>DateTime</tag>
                                    <value>+{#DATETIME} дн</value>
                                </tag>
                                <tag>
                                    <tag>Weather Block</tag>
                                    <value>General</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>872cfe05fb134dc59b112bc7dabbe5d9</uuid>
                            <name>+{#DATETIME} дн - Осадки (продолжительность)</name>
                            <type>DEPENDENT</type>
                            <key>openmeteo[weather.today+{#DATETIME}.precipitation.hours]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>!ч</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.daily.precipitation_hours[{#DATETIME}]</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>openmeteo[weather.get]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Weather</value>
                                </tag>
                                <tag>
                                    <tag>DateTime</tag>
                                    <value>+{#DATETIME} дн</value>
                                </tag>
                                <tag>
                                    <tag>Weather Block</tag>
                                    <value>Осадки</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>7c5d6f0ac66a456aaff4f6f7db68ef0b</uuid>
                            <name>+{#DATETIME} дн - Осадки (вероятность)</name>
                            <type>DEPENDENT</type>
                            <key>openmeteo[weather.today+{#DATETIME}.precipitation.probability]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.daily.precipitation_probability_max[{#DATETIME}]</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>openmeteo[weather.get]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Weather</value>
                                </tag>
                                <tag>
                                    <tag>DateTime</tag>
                                    <value>+{#DATETIME} дн</value>
                                </tag>
                                <tag>
                                    <tag>Weather Block</tag>
                                    <value>Осадки</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>feb295c5077043348af4ff2e9e8e5832</uuid>
                            <name>+{#DATETIME} дн - Осадки (дождь)</name>
                            <type>DEPENDENT</type>
                            <key>openmeteo[weather.today+{#DATETIME}.precipitation.rain]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>!мм</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.daily.rain_sum[{#DATETIME}]</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>openmeteo[weather.get]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Weather</value>
                                </tag>
                                <tag>
                                    <tag>DateTime</tag>
                                    <value>+{#DATETIME} дн</value>
                                </tag>
                                <tag>
                                    <tag>Weather Block</tag>
                                    <value>Осадки</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>841856ef1fe144d387f5f0c9a8d49eeb</uuid>
                            <name>+{#DATETIME} дн - Осадки (ливень)</name>
                            <type>DEPENDENT</type>
                            <key>openmeteo[weather.today+{#DATETIME}.precipitation.showers]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>!мм</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.daily.showers_sum[{#DATETIME}]</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>openmeteo[weather.get]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Weather</value>
                                </tag>
                                <tag>
                                    <tag>DateTime</tag>
                                    <value>+{#DATETIME} дн</value>
                                </tag>
                                <tag>
                                    <tag>Weather Block</tag>
                                    <value>Осадки</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>2ab5dd98f9b04c179de09aaf6949f24c</uuid>
                            <name>+{#DATETIME} дн - Осадки (снег)</name>
                            <type>DEPENDENT</type>
                            <key>openmeteo[weather.today+{#DATETIME}.precipitation.snowfall]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>!мм</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.daily.snowfall_sum[{#DATETIME}]</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>openmeteo[weather.get]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Weather</value>
                                </tag>
                                <tag>
                                    <tag>DateTime</tag>
                                    <value>+{#DATETIME} дн</value>
                                </tag>
                                <tag>
                                    <tag>Weather Block</tag>
                                    <value>Осадки</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>714b0f44416740798ee7caad865ad8c0</uuid>
                            <name>+{#DATETIME} дн - Осадки (суммарно)</name>
                            <type>DEPENDENT</type>
                            <key>openmeteo[weather.today+{#DATETIME}.precipitation.sum]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>!мм</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.daily.precipitation_sum[{#DATETIME}]</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>openmeteo[weather.get]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Weather</value>
                                </tag>
                                <tag>
                                    <tag>DateTime</tag>
                                    <value>+{#DATETIME} дн</value>
                                </tag>
                                <tag>
                                    <tag>Weather Block</tag>
                                    <value>Осадки</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>57794499c8d34d169eaef2a53cad3a1f</uuid>
                            <name>+{#DATETIME} дн - Рассвет</name>
                            <type>DEPENDENT</type>
                            <key>openmeteo[weather.today+{#DATETIME}.sunrise]</key>
                            <delay>0</delay>
                            <units>unixtime</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.daily.sunrise[{#DATETIME}]</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>openmeteo[weather.get]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Weather</value>
                                </tag>
                                <tag>
                                    <tag>DateTime</tag>
                                    <value>+{#DATETIME} дн</value>
                                </tag>
                                <tag>
                                    <tag>Weather Block</tag>
                                    <value>General</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>dfd8cf74265d4f279b5a6a4d438596ae</uuid>
                            <name>+{#DATETIME} дн - Закат</name>
                            <type>DEPENDENT</type>
                            <key>openmeteo[weather.today+{#DATETIME}.sunset]</key>
                            <delay>0</delay>
                            <units>unixtime</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.daily.sunset[{#DATETIME}]</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>openmeteo[weather.get]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Weather</value>
                                </tag>
                                <tag>
                                    <tag>DateTime</tag>
                                    <value>+{#DATETIME} дн</value>
                                </tag>
                                <tag>
                                    <tag>Weather Block</tag>
                                    <value>General</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>7fa66d89f9904a719c66b33087d9942b</uuid>
                            <name>+{#DATETIME} дн - Температура MAX</name>
                            <type>DEPENDENT</type>
                            <key>openmeteo[weather.today+{#DATETIME}.temperature.max]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>°C</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.daily.temperature_2m_max[{#DATETIME}]</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>openmeteo[weather.get]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Weather</value>
                                </tag>
                                <tag>
                                    <tag>DateTime</tag>
                                    <value>+{#DATETIME} дн</value>
                                </tag>
                                <tag>
                                    <tag>Weather Block</tag>
                                    <value>Температура</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>1d8d1670a9124dfc96ac59d2149d9676</uuid>
                            <name>+{#DATETIME} дн - Температура MIN</name>
                            <type>DEPENDENT</type>
                            <key>openmeteo[weather.today+{#DATETIME}.temperature.min]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>°C</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.daily.temperature_2m_min[{#DATETIME}]</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>openmeteo[weather.get]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Weather</value>
                                </tag>
                                <tag>
                                    <tag>DateTime</tag>
                                    <value>+{#DATETIME} дн</value>
                                </tag>
                                <tag>
                                    <tag>Weather Block</tag>
                                    <value>Температура</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>9cd9b52d7f83480f9788478877bccff5</uuid>
                            <name>+{#DATETIME} дн - Ветер (азимут)</name>
                            <type>DEPENDENT</type>
                            <key>openmeteo[weather.today+{#DATETIME}.wind.azimuth]</key>
                            <delay>0</delay>
                            <units>°</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.daily.wind_direction_10m_dominant[{#DATETIME}]</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>openmeteo[weather.get]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Weather</value>
                                </tag>
                                <tag>
                                    <tag>DateTime</tag>
                                    <value>+{#DATETIME} дн</value>
                                </tag>
                                <tag>
                                    <tag>Weather Block</tag>
                                    <value>Ветер</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>40ed7fc1f200493fae22ce04d41a2af3</uuid>
                            <name>+{#DATETIME} дн - Ветер (направление)</name>
                            <type>CALCULATED</type>
                            <key>openmeteo[weather.today+{#DATETIME}.wind.direction.arrow]</key>
                            <delay>15</delay>
                            <params>floor((last(//openmeteo[weather.today+{#DATETIME}.wind.azimuth])/45))</params>
                            <valuemap>
                                <name>Направления ветра (стрелочки)</name>
                            </valuemap>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Weather</value>
                                </tag>
                                <tag>
                                    <tag>DateTime</tag>
                                    <value>+{#DATETIME} дн</value>
                                </tag>
                                <tag>
                                    <tag>Weather Block</tag>
                                    <value>Ветер</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>a30e2c6cedd84708b49556eb6463b9ec</uuid>
                            <name>+{#DATETIME} дн - Ветер (направление)</name>
                            <type>CALCULATED</type>
                            <key>openmeteo[weather.today+{#DATETIME}.wind.direction]</key>
                            <delay>15</delay>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <params>floor((last(//openmeteo[weather.today+{#DATETIME}.wind.azimuth])/22.5))</params>
                            <valuemap>
                                <name>Направления ветра</name>
                            </valuemap>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Weather</value>
                                </tag>
                                <tag>
                                    <tag>DateTime</tag>
                                    <value>+{#DATETIME} дн</value>
                                </tag>
                                <tag>
                                    <tag>Weather Block</tag>
                                    <value>Ветер</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>ddbc707dbf55413880558c820403dfeb</uuid>
                            <name>+{#DATETIME} дн - Ветер (порывы)</name>
                            <type>DEPENDENT</type>
                            <key>openmeteo[weather.today+{#DATETIME}.wind.gusts]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>!м/с</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.daily.wind_gusts_10m_max[{#DATETIME}]</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>openmeteo[weather.get]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Weather</value>
                                </tag>
                                <tag>
                                    <tag>DateTime</tag>
                                    <value>+{#DATETIME} дн</value>
                                </tag>
                                <tag>
                                    <tag>Weather Block</tag>
                                    <value>Ветер</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>ae84e4d289de474e899ae0879237a1e2</uuid>
                            <name>+{#DATETIME} дн - Ветер (скорость)</name>
                            <type>DEPENDENT</type>
                            <key>openmeteo[weather.today+{#DATETIME}.wind.speed]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>!м/с</units>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.daily.wind_speed_10m_max[{#DATETIME}]</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>openmeteo[weather.get]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>Weather</value>
                                </tag>
                                <tag>
                                    <tag>DateTime</tag>
                                    <value>+{#DATETIME} дн</value>
                                </tag>
                                <tag>
                                    <tag>Weather Block</tag>
                                    <value>Ветер</value>
                                </tag>
                            </tags>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>openmeteo[weather.get]</key>
                    </master_item>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.daily.time</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>value = value.replace(/\[|\]/g, '');
item = value.split(',');
const result = &quot;{\&quot;data\&quot;:[&quot;;
if (item[0].length &gt; 0 )
{
     for (i = 0; i &lt; item.length; ++i)
     {
          result += &quot;{\&quot;{#DATETIME}\&quot;:&quot; + i + &quot;},&quot;;
     }
     result = result.slice(0,-1);
}
result += &quot;]}&quot;;
return result;</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
            </discovery_rules>
            <macros>
                <macro>
                    <macro>{$FORECAST_DAYS}</macro>
                    <value>3</value>
                    <description>Количество дней для прогноза</description>
                </macro>
                <macro>
                    <macro>{$LATITUDE}</macro>
                    <value>59.941546</value>
                    <description>Широта точки</description>
                </macro>
                <macro>
                    <macro>{$LONGITUDE}</macro>
                    <value>30.304449</value>
                    <description>Долгота точки</description>
                </macro>
                <macro>
                    <macro>{$TIMEZONE}</macro>
                    <value>Europe/Moscow</value>
                </macro>
            </macros>
            <valuemaps>
                <valuemap>
                    <uuid>ab67792aaa344d368d407cdc490d5dbe</uuid>
                    <name>Weather Code</name>
                    <mappings>
                        <mapping>
                            <value>0</value>
                            <newvalue>Ясно</newvalue>
                        </mapping>
                        <mapping>
                            <value>1</value>
                            <newvalue>Преимущественно ясно</newvalue>
                        </mapping>
                        <mapping>
                            <value>2</value>
                            <newvalue>Переменная облачность</newvalue>
                        </mapping>
                        <mapping>
                            <value>3</value>
                            <newvalue>Облачно</newvalue>
                        </mapping>
                        <mapping>
                            <value>45</value>
                            <newvalue>Туман</newvalue>
                        </mapping>
                        <mapping>
                            <value>48</value>
                            <newvalue>Иней</newvalue>
                        </mapping>
                        <mapping>
                            <value>51</value>
                            <newvalue>Слабая морось</newvalue>
                        </mapping>
                        <mapping>
                            <value>53</value>
                            <newvalue>Морось</newvalue>
                        </mapping>
                        <mapping>
                            <value>55</value>
                            <newvalue>Плотная морось</newvalue>
                        </mapping>
                        <mapping>
                            <value>56</value>
                            <newvalue>Слабая изморозь</newvalue>
                        </mapping>
                        <mapping>
                            <value>57</value>
                            <newvalue>Плотная изморозь</newvalue>
                        </mapping>
                        <mapping>
                            <value>71</value>
                            <newvalue>Слабый снегопад</newvalue>
                        </mapping>
                        <mapping>
                            <value>73</value>
                            <newvalue>Снегопад</newvalue>
                        </mapping>
                        <mapping>
                            <value>75</value>
                            <newvalue>Сильный снегопад</newvalue>
                        </mapping>
                        <mapping>
                            <value>77</value>
                            <newvalue>Снежная крупа</newvalue>
                        </mapping>
                        <mapping>
                            <value>80</value>
                            <newvalue>Слабый ливень</newvalue>
                        </mapping>
                        <mapping>
                            <value>81</value>
                            <newvalue>Ливень</newvalue>
                        </mapping>
                        <mapping>
                            <value>82</value>
                            <newvalue>Сильный ливень</newvalue>
                        </mapping>
                        <mapping>
                            <value>61</value>
                            <newvalue>Небольшой дождь</newvalue>
                        </mapping>
                        <mapping>
                            <value>63</value>
                            <newvalue>Дождь</newvalue>
                        </mapping>
                        <mapping>
                            <value>65</value>
                            <newvalue>Сильный дождь</newvalue>
                        </mapping>
                        <mapping>
                            <value>66</value>
                            <newvalue>Ледяной дождь</newvalue>
                        </mapping>
                        <mapping>
                            <value>67</value>
                            <newvalue>Сильный ледяной дождь</newvalue>
                        </mapping>
                        <mapping>
                            <value>85</value>
                            <newvalue>Ледяной ливень</newvalue>
                        </mapping>
                        <mapping>
                            <value>86</value>
                            <newvalue>Сильный ледяной ливень</newvalue>
                        </mapping>
                        <mapping>
                            <value>96</value>
                            <newvalue>Гроза с градом</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
                <valuemap>
                    <uuid>073428e4ef894247b6e834bf8da9eb90</uuid>
                    <name>Направления ветра</name>
                    <mappings>
                        <mapping>
                            <value>0</value>
                            <newvalue>С</newvalue>
                        </mapping>
                        <mapping>
                            <value>1</value>
                            <newvalue>ССВ</newvalue>
                        </mapping>
                        <mapping>
                            <value>2</value>
                            <newvalue>СВ</newvalue>
                        </mapping>
                        <mapping>
                            <value>3</value>
                            <newvalue>ВСВ</newvalue>
                        </mapping>
                        <mapping>
                            <value>4</value>
                            <newvalue>В</newvalue>
                        </mapping>
                        <mapping>
                            <value>5</value>
                            <newvalue>ВЮВ</newvalue>
                        </mapping>
                        <mapping>
                            <value>6</value>
                            <newvalue>ЮВ</newvalue>
                        </mapping>
                        <mapping>
                            <value>7</value>
                            <newvalue>ЮЮВ</newvalue>
                        </mapping>
                        <mapping>
                            <value>8</value>
                            <newvalue>Ю</newvalue>
                        </mapping>
                        <mapping>
                            <value>9</value>
                            <newvalue>ЮЮЗ</newvalue>
                        </mapping>
                        <mapping>
                            <value>10</value>
                            <newvalue>ЮЗ</newvalue>
                        </mapping>
                        <mapping>
                            <value>11</value>
                            <newvalue>ЗЮЗ</newvalue>
                        </mapping>
                        <mapping>
                            <value>12</value>
                            <newvalue>З</newvalue>
                        </mapping>
                        <mapping>
                            <value>13</value>
                            <newvalue>ЗСЗ</newvalue>
                        </mapping>
                        <mapping>
                            <value>14</value>
                            <newvalue>СЗ</newvalue>
                        </mapping>
                        <mapping>
                            <value>15</value>
                            <newvalue>ССЗ</newvalue>
                        </mapping>
                        <mapping>
                            <value>16</value>
                            <newvalue>С</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
                <valuemap>
                    <uuid>efa66c91f81948e5a9956b5f7b96c23b</uuid>
                    <name>Направления ветра (стрелочки)</name>
                    <mappings>
                        <mapping>
                            <value>0</value>
                            <newvalue>↓</newvalue>
                        </mapping>
                        <mapping>
                            <value>1</value>
                            <newvalue>↙</newvalue>
                        </mapping>
                        <mapping>
                            <value>2</value>
                            <newvalue>←</newvalue>
                        </mapping>
                        <mapping>
                            <value>3</value>
                            <newvalue>↖</newvalue>
                        </mapping>
                        <mapping>
                            <value>4</value>
                            <newvalue>↑</newvalue>
                        </mapping>
                        <mapping>
                            <value>5</value>
                            <newvalue>↗</newvalue>
                        </mapping>
                        <mapping>
                            <value>6</value>
                            <newvalue>→</newvalue>
                        </mapping>
                        <mapping>
                            <value>7</value>
                            <newvalue>↘</newvalue>
                        </mapping>
                        <mapping>
                            <value>8</value>
                            <newvalue>↓</newvalue>
                        </mapping>
                    </mappings>
                </valuemap>
            </valuemaps>
        </template>
    </templates>
</zabbix_export>
